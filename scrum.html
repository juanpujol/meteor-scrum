<head>
  <title>Meteor Scrum</title>
  <link href='http://fonts.googleapis.com/css?family=Fugaz+One' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <script type="text/javascript" src="jquery.ui.touch-punch.min.js"></script>
  <script type="text/javascript" src="app.js"></script>
</head>

<body>

  <div id="loading"></div>

  <header>
   <h1>Meteor Scrum</h1>
   <h2>Scrum is an iterative and incremental agile software development method for managing software projects and product or application development.</h2>
  </header>

  <table width="100%">

    <thead>
      <tr>
        <th id="story-header"><span>Stories</span></th>
        <th id="plus-header"></th>
        <th id="todo-header"><span>To Do</span></th>
        <th id="inprogress-header"><span>In Progress</span></th>
        <th id="verify-header"><span>Verify</span></th>
        <th id="done-header"><span>Done</span></th>
      </tr>
    </thead>

    <tbody class="content">
      {{> stories_list}}
      {{> new_story}}
    </tbody>
  </table>

  <footer>
   <p>
    A scrum board inspired by <a href="http://scrumy.com" target="_blank">Scrumy.com</a>.
    This project is being developed with <a href="http://meteor.com" target="_blank" title="Learn more about Meteor.js">Meteor.js</a> and it's a work in progress, 
    but you can download the current source code at <a href="https://github.com/juanpujol/meteor-scrum" target="_blank" title="Download the source code at GitHub">GitHub</a> if you want.
   </p>
  </footer>

  <div id="new_todo">
    {{> new_todo}}
  </div>

</body>

<template name="stories_list">
  {{#each stories}}
    {{> story}}
  {{/each}}
</template>

<template name="story">
  <tr class="content" id="{{_id}}">
    <td class="story">
      <div>
        <span>{{title}}</span>
        {{#if points}}
          <small>({{points}} points)</small>
        {{/if}}
      </div>
    </td>
    <td class="plus">
      <button class="cross">+</button>
    </td>
    <td class="sortable todos" data-status="todo">
      {{> todos_list}}
    </td>
    <td class="sortable wip" data-status="wip">
      {{> wip_list}}
    </td>
    <td class="sortable verify" data-status="verify">
      {{> verify_list}}
    </td>
    <td class="sortable done" data-status="done">
      {{> done_list}}
    </td>
  </tr>
</template>

<template name="new_story">
  <tr class="create_story">
    <td>
      <input name="title" type="text" placeholder="Title"> <input name="points" type="text" placeholder="Points">
      <button>New Story</button>
    </td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</template>

<template name="todos_list">
  {{#each todos}}
    <div class="todo" id="{{_id}}">
      <p>{{text}}</p>
      {{#if person}}
        <small>{{person}}</small>
      {{/if}}
    </div>
  {{/each}}
</template>

<template name="wip_list">
  {{#each todos}}
    <div class="todo" id="{{_id}}">
      <p>{{text}}</p>
      {{#if person}}
        <small>{{person}}</small>
      {{/if}}
    </div>
  {{/each}}
</template>

<template name="verify_list">
  {{#each todos}}
    <div class="todo" id="{{_id}}">
      <p>{{text}}</p>
      {{#if person}}
        <small>{{person}}</small>
      {{/if}}
    </div>
  {{/each}}
</template>

<template name="done_list">
  {{#each todos}}
    <div class="todo" id="{{_id}}">
      <p>{{text}}</p>
      {{#if person}}
        <small>{{person}}</small>
      {{/if}}
    </div>
  {{/each}}
</template>

<template name="new_todo">
  <div class="create_todo">
    <textarea name="text"></textarea>
    <input type="text" name="person" placeholder="Person">
    <input type="hidden" name="story_id" value="">
    <br>
    <button class="create_todo_btn">New Todo</button>
  </div>
  <div class="tooltip-pointer"></div>
</template>

